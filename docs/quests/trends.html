<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ ‚Äî –ö–≤–µ—Å—Ç –ø–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ –∑–∞—Ä–∞–±–æ—Ç–∫–∞</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Sora:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="quests-black-white.css" />
  <link rel="stylesheet" href="trends-core.css" />
</head>
<body>
  <div id="app" class="app">
    <!-- –®–∞–ø–∫–∞ –∫–≤–µ—Å—Ç–∞ -->
    <header class="glass topbar">
      <div class="brand">
        <span class="logoGlow"></span>
        <h1>üîÆ –ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å —Ç—Ä–µ–Ω–¥–æ–≤</h1>
        <div class="badge pulse">PRO</div>
      </div>
      <div class="actions">
        <button id="btnBack" class="btn ghost">‚Üê –ù–∞–∑–∞–¥</button>
      </div>
    </header>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è -->
    <div id="welcomeScreen" class="screen active">
      <div class="welcome-container glass">
        <div class="welcome-header">
          <div class="welcome-icon">üîÆ</div>
          <h2>–°—Ç–∞–Ω—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª–µ–º —Ç—Ä–µ–Ω–¥–æ–≤</h2>
          <p class="subtitle">–ù–∞—É—á–∏—Å—å –≤–∏–¥–µ—Ç—å –±—É–¥—É—â–µ–µ —Ä–∞–Ω—å—à–µ –¥—Ä—É–≥–∏—Ö –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –Ω–∞ —ç—Ç–æ–º</p>
        </div>
        
        <div class="welcome-features">
          <div class="feature-card">
            <span class="feature-icon">üß†</span>
            <h3>–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –º–∞—Å—Å</h3>
            <p>–ü–æ–Ω–∏–º–∞–π, –∫–∞–∫ –º—ã—Å–ª—è—Ç –ª—é–¥–∏ –∏ —á—Ç–æ –±—É–¥–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω–æ –∑–∞–≤—Ç—Ä–∞</p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">üìà</span>
            <h3>–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö</h3>
            <p>–ù–∞—É—á–∏—Å—å –≤–∏–¥–µ—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —Å–∏–≥–Ω–∞–ª—ã –≤ –ø–æ—Ç–æ–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</p>
          </div>
          <div class="feature-card">
            <span class="feature-icon">üí∞</span>
            <h3>–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è</h3>
            <p>–ü—Ä–µ–≤—Ä–∞—â–∞–π –∑–Ω–∞–Ω–∏—è –æ –±—É–¥—É—â–µ–º –≤ —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥</p>
          </div>
        </div>

        <div class="progress-overview">
          <h4>–¢–≤–æ–π –ø—É—Ç—å –∫ —É—Å–ø–µ—Ö—É:</h4>
          <div class="stages-preview">
            <div class="stage-preview">
              <span class="stage-num">1</span>
              <span class="stage-name">–ü–æ–π–º–∞–π –≤–æ–ª–Ω—É</span>
            </div>
            <div class="stage-preview">
              <span class="stage-num">2</span>
              <span class="stage-name">–ß–∏—Ç–∞–π —ç–º–æ—Ü–∏–∏</span>
            </div>
            <div class="stage-preview">
              <span class="stage-num">3</span>
              <span class="stage-name">–ù–∞–π–¥–∏ –ø–∞—Ç—Ç–µ—Ä–Ω</span>
            </div>
            <div class="stage-preview">
              <span class="stage-num">4</span>
              <span class="stage-name">–°–¥–µ–ª–∞–π –ø—Ä–æ–≥–Ω–æ–∑</span>
            </div>
            <div class="stage-preview">
              <span class="stage-num">5</span>
              <span class="stage-name">–ó–∞—Ä–∞–±–æ—Ç–∞–π</span>
            </div>
          </div>
        </div>

        <button id="startQuest" class="btn primary large pulse-btn">
          <span>üöÄ –ù–∞—á–∞—Ç—å –ø—É—Ç—å –∫ —É—Å–ø–µ—Ö—É</span>
        </button>
      </div>
    </div>

    <!-- –≠—Ç–∞–ø 1: –ü–æ–π–º–∞–π –≤–æ–ª–Ω—É (Swipe –º–µ—Ö–∞–Ω–∏–∫–∞) -->
    <div id="stage1" class="screen">
      <div class="stage-header glass">
        <div class="stage-info">
          <h2>–≠—Ç–∞–ø 1: –ü–æ–π–º–∞–π –≤–æ–ª–Ω—É</h2>
          <p>–°–≤–∞–π–ø–∞–π —Ç—Ä–µ–Ω–¥—ã –≤–ª–µ–≤–æ –∏–ª–∏ –≤–ø—Ä–∞–≤–æ. –í–ª–µ–≤–æ - —É–º—Ä—ë—Ç, –≤–ø—Ä–∞–≤–æ - –≤–∑–ª–µ—Ç–∏—Ç!</p>
        </div>
        <div class="stage-progress">
          <div class="progress-bar">
            <div class="progress-fill" style="width: 0%"></div>
          </div>
          <span class="progress-text">0/10</span>
        </div>
      </div>

      <div class="swipe-container">
        <div class="swipe-zone" id="swipeZone">
          <div class="trend-card" id="currentCard">
            <div class="trend-image"></div>
            <h3 class="trend-title"></h3>
            <p class="trend-description"></p>
            <div class="trend-stats">
              <div class="stat">
                <span class="stat-icon">üë•</span>
                <span class="stat-value"></span>
              </div>
              <div class="stat">
                <span class="stat-icon">üìä</span>
                <span class="stat-value"></span>
              </div>
              <div class="stat">
                <span class="stat-icon">üî•</span>
                <span class="stat-value"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="decision-feedback" id="decisionFeedback">
          <div class="feedback-content"></div>
        </div>

        <div class="swipe-instructions">
          <span>‚Üê –°–≤–∞–π–ø –≤–ª–µ–≤–æ = –ü—Ä–æ–≤–∞–ª</span>
          <span>–°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ = –£—Å–ø–µ—Ö ‚Üí</span>
        </div>
      </div>
    </div>

    <!-- –≠—Ç–∞–ø 2: –ß–∏—Ç–∞–π —ç–º–æ—Ü–∏–∏ (–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞–¥–∞—Ä) -->
    <div id="stage2" class="screen">
      <div class="stage-header glass">
        <div class="stage-info">
          <h2>–≠—Ç–∞–ø 2: –ß–∏—Ç–∞–π —ç–º–æ—Ü–∏–∏ —Ä—ã–Ω–∫–∞</h2>
          <p>–û–ø—Ä–µ–¥–µ–ª–∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –ø–æ –ø–æ—Å—Ç–∞–º –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö</p>
        </div>
        <div class="timer-container">
          <span class="timer-icon">‚è±Ô∏è</span>
          <span class="timer" id="emotionTimer">60</span>
        </div>
      </div>

      <div class="emotion-radar-container">
        <div class="social-posts" id="socialPosts">
          <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –ø–æ—Å—Ç—ã -->
        </div>

        <div class="emotion-radar" id="emotionRadar">
          <canvas id="radarCanvas"></canvas>
          <div class="radar-center">
            <span>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ<br>—Ä—ã–Ω–∫–∞</span>
          </div>
          <div class="emotion-sectors">
            <div class="sector" data-emotion="fear">
              <span class="sector-icon">üò®</span>
              <span class="sector-name">–°—Ç—Ä–∞—Ö</span>
            </div>
            <div class="sector" data-emotion="greed">
              <span class="sector-icon">ü§ë</span>
              <span class="sector-name">–ñ–∞–¥–Ω–æ—Å—Ç—å</span>
            </div>
            <div class="sector" data-emotion="hope">
              <span class="sector-icon">ü§©</span>
              <span class="sector-name">–ù–∞–¥–µ–∂–¥–∞</span>
            </div>
            <div class="sector" data-emotion="doubt">
              <span class="sector-icon">ü§î</span>
              <span class="sector-name">–°–æ–º–Ω–µ–Ω–∏–µ</span>
            </div>
          </div>
        </div>

        <button id="confirmEmotion" class="btn primary large" disabled>
          –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–Ω–∞–ª–∏–∑
        </button>
      </div>
    </div>

    <!-- –≠—Ç–∞–ø 3: –ù–∞–π–¥–∏ –ø–∞—Ç—Ç–µ—Ä–Ω (Drag & Drop) -->
    <div id="stage3" class="screen">
      <div class="stage-header glass">
        <div class="stage-info">
          <h2>–≠—Ç–∞–ø 3: –ù–∞–π–¥–∏ —Å–∫—Ä—ã—Ç—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω</h2>
          <p>–ü–µ—Ä–µ—Ç–∞—â–∏ —Å–æ–±—ã—Ç–∏—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç—å</p>
        </div>
        <div class="hint-button">
          <button id="showHint" class="btn ghost small">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
        </div>
      </div>

      <div class="pattern-game">
        <div class="pattern-board">
          <div class="timeline-track">
            <div class="timeline-line"></div>
            <div class="drop-zones" id="dropZones">
              <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
          </div>
        </div>

        <div class="events-pool" id="eventsPool">
          <h4>–°–æ–±—ã—Ç–∏—è (–ø–µ—Ä–µ—Ç–∞—â–∏ –Ω–∞ timeline)</h4>
          <div class="draggable-events">
            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
          </div>
        </div>

        <div class="pattern-result" id="patternResult" style="display: none;">
          <h3>–ü–∞—Ç—Ç–µ—Ä–Ω –Ω–∞–π–¥–µ–Ω!</h3>
          <p class="pattern-explanation"></p>
          <button id="nextFromPattern" class="btn primary">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
      </div>
    </div>

    <!-- –≠—Ç–∞–ø 4: –°–¥–µ–ª–∞–π –ø—Ä–æ–≥–Ω–æ–∑ (–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫) -->
    <div id="stage4" class="screen">
      <div class="stage-header glass">
        <div class="stage-info">
          <h2>–≠—Ç–∞–ø 4: –ü—Ä–µ–¥—Å–∫–∞–∂–∏ –±—É–¥—É—â–µ–µ</h2>
          <p>–ù–∞—Ä–∏—Å—É–π –ø–∞–ª—å—Ü–µ–º, –∫–∞–∫ –±—É–¥–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è —Ç—Ä–µ–Ω–¥</p>
        </div>
        <div class="score-display">
          <span class="score-icon">‚≠ê</span>
          <span class="score-value" id="predictionScore">0</span>
        </div>
      </div>

      <div class="prediction-container">
        <div class="chart-area">
          <canvas id="predictionCanvas"></canvas>
          <div class="chart-labels">
            <div class="y-axis-label">–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å</div>
            <div class="x-axis-label">–í—Ä–µ–º—è ‚Üí</div>
          </div>
        </div>

        <div class="prediction-tools">
          <button class="tool-btn active" data-tool="draw">
            <span>‚úèÔ∏è</span>
            <span>–†–∏—Å–æ–≤–∞—Ç—å</span>
          </button>
          <button class="tool-btn" data-tool="erase">
            <span>üßπ</span>
            <span>–°—Ç–µ—Ä–µ—Ç—å</span>
          </button>
          <button class="tool-btn" data-tool="undo">
            <span>‚Ü©Ô∏è</span>
            <span>–û—Ç–º–µ–Ω–∏—Ç—å</span>
          </button>
        </div>

        <div class="trend-factors">
          <h4>–§–∞–∫—Ç–æ—Ä—ã –≤–ª–∏—è–Ω–∏—è:</h4>
          <div class="factors-list" id="factorsList">
            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
          </div>
        </div>

        <button id="submitPrediction" class="btn primary large" disabled>
          –°–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑
        </button>
      </div>
    </div>

    <!-- –≠—Ç–∞–ø 5: –ó–∞—Ä–∞–±–æ—Ç–∞–π (–°–∏–º—É–ª—è—Ü–∏—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π) -->
    <div id="stage5" class="screen">
      <div class="stage-header glass">
        <div class="stage-info">
          <h2>–≠—Ç–∞–ø 5: –í—Ä–µ–º—è –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å!</h2>
          <p>–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π –≤ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã –∏ —Å–ª–µ–¥–∏ –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</p>
        </div>
        <div class="balance-display">
          <span class="balance-icon">üí∞</span>
          <span class="balance-value" id="currentBalance">$1000</span>
        </div>
      </div>

      <div class="investment-game">
        <div class="portfolio-container">
          <h3>–¢–≤–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å —Ç—Ä–µ–Ω–¥–æ–≤</h3>
          <div class="portfolio-slots" id="portfolioSlots">
            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
          </div>
        </div>

        <div class="market-feed">
          <h4>–†—ã–Ω–æ—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏</h4>
          <div class="news-ticker" id="newsTicker">
            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
          </div>
        </div>

        <div class="action-panel">
          <div class="available-trends" id="availableTrends">
            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
          </div>
          <button id="simulateDay" class="btn primary large">
            ‚è≠Ô∏è –°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
          </button>
        </div>

        <div class="profit-chart">
          <canvas id="profitCanvas"></canvas>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
    <div id="resultsScreen" class="screen">
      <div class="results-container glass">
        <div class="results-header">
          <div class="results-icon trophy">üèÜ</div>
          <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
          <p>–¢—ã –ø—Ä–æ—à—ë–ª –ø—É—Ç—å –æ—Ç –Ω–æ–≤–∏—á–∫–∞ –¥–æ –ø—Ä–æ—Ñ–∏</p>
        </div>

        <div class="results-stats">
          <div class="stat-card">
            <span class="stat-icon">üéØ</span>
            <span class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–æ–≤</span>
            <span class="stat-value" id="accuracyStat">0%</span>
          </div>
          <div class="stat-card">
            <span class="stat-icon">üíµ</span>
            <span class="stat-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</span>
            <span class="stat-value" id="profitStat">$0</span>
          </div>
          <div class="stat-card">
            <span class="stat-icon">üî•</span>
            <span class="stat-label">–ù–∞–π–¥–µ–Ω–æ —Ç—Ä–µ–Ω–¥–æ–≤</span>
            <span class="stat-value" id="trendsStat">0</span>
          </div>
          <div class="stat-card">
            <span class="stat-icon">‚≠ê</span>
            <span class="stat-label">–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥</span>
            <span class="stat-value" id="ratingStat">0</span>
          </div>
        </div>

        <div class="achievements">
          <h3>–¢–≤–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</h3>
          <div class="achievement-list" id="achievementList">
            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
          </div>
        </div>

        <div class="rewards-earned">
          <h3>–ù–∞–≥—Ä–∞–¥—ã:</h3>
          <div class="reward-items">
            <div class="reward-item">
              <span class="reward-icon">ü™ô</span>
              <span class="reward-amount" id="coinsReward">0 MULACOIN</span>
            </div>
            <div class="reward-item">
              <span class="reward-icon">‚ö°</span>
              <span class="reward-amount" id="xpReward">0 XP</span>
            </div>
          </div>
        </div>

        <div class="action-buttons">
          <button id="shareResults" class="btn secondary">
            üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
          </button>
          <button id="playAgain" class="btn primary">
            üîÑ –ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑
          </button>
          <button id="exitToMenu" class="btn ghost">
            ‚Üê –í –º–µ–Ω—é
          </button>
        </div>
      </div>
    </div>

    <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è —Ç—É—Ç–æ—Ä–∏–∞–ª–æ–≤ -->
    <div id="tutorialOverlay" class="tutorial-overlay" style="display: none;">
      <div class="tutorial-content">
        <div class="tutorial-pointer"></div>
        <div class="tutorial-text"></div>
        <button class="tutorial-next btn primary small">–î–∞–ª–µ–µ</button>
      </div>
    </div>

    <!-- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loadingIndicator" class="loading-indicator" style="display: none;">
      <div class="spinner"></div>
    </div>
  </div>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script src="trends-data.js"></script>
  <script src="trends-engine.js"></script>
  <script src="trends-ui.js"></script>
  <script src="trends-main.js"></script>
</body>
</html>