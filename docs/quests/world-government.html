<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Тайное мировое сообщество — Квест‑Хаб</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Sora:wght@500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* ====== GOLDEN THEME ====== */
    :root {
      /* Color Palette - Golden Harmony */
      --bg-primary: #443020;
      --bg-secondary: #d5921a;
      --bg-tertiary: #f1d881;
      --bg-light: #f9f4e6;
      --bg-dark: #5b5643;
      --bg-glass: rgba(243, 220, 179, 0.9);
      --bg-glass-hover: rgba(253, 215, 122, 0.95);
      
      /* Text Colors */
      --text-primary: #42100d;
      --text-secondary: #b95c1a;
      --text-muted: #8b4513;
      --text-accent: #e7af3e;
      
      /* Accent Colors */
      --accent-primary: #e7af3e;
      --accent-secondary: #fdd77a;
      --accent-glow: #f3dcb3;
      
      /* Border & Shadow */
      --border-color: #fdd77a;
      --border-hover: #e7af3e;
      --shadow-light: 0 4px 20px rgba(231, 175, 62, 0.3);
      --shadow-medium: 0 8px 40px rgba(231, 175, 62, 0.4);
      --shadow-heavy: 0 16px 80px rgba(231, 175, 62, 0.5);
      
      /* Glass Effect */
      --glass-bg: rgba(243, 220, 179, 0.9);
      --glass-border: #fdd77a;
      --glass-shadow: 0 8px 32px rgba(66, 16, 13, 0.2);
      
      /* Animation */
      --transition-fast: 0.2s ease;
      --transition-medium: 0.4s ease;
      --transition-slow: 0.8s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #443020 0%, #d5921a 25%, #f1d881 50%, #f9f4e6 75%, #5b5643 100%);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
      min-height: 100vh;
      aspect-ratio: 9/16;
      max-width: 100vw;
      margin: 0 auto;
    }

    /* ====== ANIMATED BACKGROUND ====== */
    .animated-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .floating-shapes {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    .shape {
      position: absolute;
      background: rgba(253, 215, 122, 0.2);
      border: 1px solid var(--border-color);
      border-radius: 50%;
      opacity: 0.4;
      animation: float 20s infinite linear;
    }

    .shape:nth-child(1) { width: 80px; height: 80px; top: 10%; left: 10%; animation-delay: 0s; }
    .shape:nth-child(2) { width: 120px; height: 120px; top: 20%; right: 15%; animation-delay: -5s; }
    .shape:nth-child(3) { width: 60px; height: 60px; bottom: 30%; left: 20%; animation-delay: -10s; }
    .shape:nth-child(4) { width: 100px; height: 100px; bottom: 20%; right: 10%; animation-delay: -15s; }
    .shape:nth-child(5) { width: 90px; height: 90px; top: 50%; left: 50%; animation-delay: -7s; }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      25% { transform: translateY(-20px) rotate(90deg); }
      50% { transform: translateY(-40px) rotate(180deg); }
      75% { transform: translateY(-20px) rotate(270deg); }
    }

    .grid-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(rgba(253, 215, 122, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(253, 215, 122, 0.05) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: gridMove 60s linear infinite;
    }

    @keyframes gridMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(50px, 50px); }
    }

    /* ====== MAIN CONTAINER ====== */
    .world-government-quest {
      position: relative;
      min-height: 100vh;
      max-width: 100vw;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
    }

    /* ====== HEADER CONTROLS ====== */
    .header-controls {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
    }

    .back-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: var(--bg-glass);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      color: var(--text-primary);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-fast);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-light);
    }

    .back-btn:hover {
      background: var(--bg-glass-hover);
      border-color: var(--border-hover);
      transform: translateY(-3px);
      box-shadow: var(--shadow-medium);
    }

    .back-icon {
      font-size: 16px;
      font-weight: 700;
    }

    /* ====== MODALS ====== */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(66, 16, 13, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all var(--transition-medium);
      backdrop-filter: blur(10px);
    }

    .modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--bg-glass);
      border: 2px solid var(--border-color);
      border-radius: 20px;
      padding: 30px;
      max-width: 90%;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      animation: modalSlideIn 0.4s ease;
      box-shadow: var(--shadow-heavy);
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .modal-header h2, .modal-header h3 {
      color: var(--text-primary);
      font-family: 'Sora', sans-serif;
      font-weight: 700;
      font-size: 24px;
      margin-bottom: 10px;
    }

    .modal-body {
      margin-bottom: 25px;
      color: var(--text-secondary);
      font-size: 16px;
      line-height: 1.6;
    }

    .modal-footer {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* ====== BUTTONS ====== */
    .btn {
      padding: 12px 24px;
      border: 2px solid var(--border-color);
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-fast);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-height: 48px;
      box-shadow: var(--shadow-light);
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-medium);
    }

    .btn-primary {
      background: var(--accent-primary);
      color: var(--bg-primary);
      border-color: var(--accent-primary);
    }

    .btn-primary:hover {
      background: var(--accent-secondary);
      border-color: var(--accent-secondary);
    }

    .btn-secondary {
      background: var(--bg-glass);
      color: var(--text-primary);
      border-color: var(--border-color);
    }

    .btn-secondary:hover {
      background: var(--bg-glass-hover);
      border-color: var(--border-hover);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* ====== WARNING MODAL ====== */
    .warning-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .warning-header h2 {
      color: var(--text-primary);
      font-family: 'Sora', sans-serif;
      font-weight: 800;
      font-size: 28px;
      margin-bottom: 10px;
      animation: titleGlow 3s ease-in-out infinite;
    }

    @keyframes titleGlow {
      0%, 100% { filter: drop-shadow(0 0 20px rgba(231, 175, 62, 0.3)); }
      50% { filter: drop-shadow(0 0 40px rgba(231, 175, 62, 0.6)); }
    }

    .warning-body p {
      margin-bottom: 15px;
      font-size: 16px;
      line-height: 1.6;
    }

    .warning-body strong {
      color: var(--accent-primary);
      font-weight: 700;
    }

    /* ====== MAIN INTERFACE ====== */
    .main-interface {
      padding: 80px 20px 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .main-interface.hidden {
      display: none;
    }

    /* ====== ISLAND CONTAINER ====== */
    .island-container {
      position: relative;
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
      aspect-ratio: 1;
    }

    .island-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 20px;
      box-shadow: var(--shadow-medium);
      animation: islandFloat 6s ease-in-out infinite;
    }

    @keyframes islandFloat {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(1deg); }
    }

    /* ====== SECTORS ====== */
    .sector {
      position: absolute;
      background: var(--bg-glass);
      border: 2px solid var(--border-color);
      border-radius: 15px;
      padding: 15px;
      min-width: 120px;
      text-align: center;
      cursor: pointer;
      transition: all var(--transition-fast);
      box-shadow: var(--shadow-light);
      backdrop-filter: blur(10px);
    }

    .sector:hover {
      background: var(--bg-glass-hover);
      border-color: var(--border-hover);
      transform: scale(1.05);
      box-shadow: var(--shadow-medium);
    }

    .sector.active {
      background: var(--accent-primary);
      border-color: var(--accent-primary);
      color: var(--bg-primary);
      animation: sectorPulse 2s ease-in-out infinite;
    }

    @keyframes sectorPulse {
      0%, 100% { transform: scale(1.05); }
      50% { transform: scale(1.1); }
    }

    .sector-label {
      font-weight: 700;
      font-size: 14px;
      margin-bottom: 5px;
      color: inherit;
    }

    .sector-count {
      font-size: 12px;
      opacity: 0.8;
      color: inherit;
    }

    .sector-members {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      justify-content: center;
    }

    .member-avatar {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--accent-secondary);
      border: 2px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 700;
      color: var(--bg-primary);
      animation: memberBounce 0.6s ease-out;
    }

    @keyframes memberBounce {
      0% { transform: scale(0) rotate(180deg); }
      50% { transform: scale(1.2) rotate(90deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    /* Позиционирование секторов */
    .political-sector {
      top: 15%;
      left: 20%;
    }

    .military-sector {
      top: 25%;
      right: 15%;
    }

    .economic-sector {
      top: 60%;
      left: 10%;
    }

    .research-sector {
      bottom: 20%;
      right: 20%;
    }

    .propaganda-sector {
      bottom: 35%;
      left: 50%;
      transform: translateX(-50%);
    }

    /* ====== BOTTOM PANEL ====== */
    .bottom-panel {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: auto;
    }

    .character-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
      align-items: center;
    }

    .character-card {
      background: var(--bg-glass);
      border: 2px solid var(--border-color);
      border-radius: 20px;
      padding: 20px;
      width: 100%;
      max-width: 350px;
      text-align: center;
      box-shadow: var(--shadow-medium);
      backdrop-filter: blur(10px);
      animation: cardSlideIn 0.5s ease-out;
    }

    @keyframes cardSlideIn {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .character-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: var(--accent-secondary);
      border: 3px solid var(--border-color);
      margin: 0 auto 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      font-weight: 700;
      color: var(--bg-primary);
      animation: avatarGlow 2s ease-in-out infinite;
    }

    @keyframes avatarGlow {
      0%, 100% { box-shadow: 0 0 20px rgba(231, 175, 62, 0.3); }
      50% { box-shadow: 0 0 40px rgba(231, 175, 62, 0.6); }
    }

    .character-name {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 10px;
      font-family: 'Sora', sans-serif;
    }

    .character-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }

    .stat-item {
      background: var(--bg-light);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 8px;
      font-size: 12px;
      font-weight: 600;
    }

    .stat-label {
      color: var(--text-muted);
      margin-bottom: 3px;
    }

    .stat-value {
      color: var(--text-primary);
      font-size: 14px;
    }

    .character-description {
      color: var(--text-secondary);
      font-size: 14px;
      line-height: 1.5;
      margin-bottom: 15px;
    }

    /* ====== STORY MODAL ====== */
    .story-modal {
      background: rgba(0, 0, 0, 0.8);
    }

    .story-content {
      background: rgba(66, 16, 13, 0.95);
      border: 2px solid var(--accent-primary);
      color: var(--bg-light);
      text-align: center;
      max-width: 95%;
      width: 95%;
    }

    .story-title {
      color: var(--accent-primary);
      font-family: 'Sora', sans-serif;
      font-weight: 800;
      font-size: 24px;
      margin-bottom: 20px;
      text-shadow: 0 0 20px rgba(231, 175, 62, 0.5);
    }

    .story-text {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 25px;
      color: var(--bg-light);
    }

    .story-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* ====== VIDEO BACKGROUND ====== */
    .video-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      object-fit: cover;
    }

    .story-content.with-video {
      background: rgba(0, 0, 0, 0.8);
      border-color: var(--accent-primary);
    }

    /* ====== SOUND CONTROL ====== */
    .sound-control {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1001;
    }

    .sound-btn {
      background: var(--bg-glass);
      border: 2px solid var(--border-color);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition-fast);
      box-shadow: var(--shadow-light);
      color: var(--text-primary);
    }

    .sound-btn:hover {
      background: var(--bg-glass-hover);
      border-color: var(--border-hover);
      transform: scale(1.1);
      box-shadow: var(--shadow-medium);
    }

    .sound-btn.muted {
      background: var(--bg-dark);
      color: var(--text-muted);
    }

    /* ====== RESPONSIVE DESIGN ====== */
    @media (max-width: 480px) {
      .main-interface {
        padding: 70px 15px 15px;
      }

      .island-container {
        max-width: 300px;
      }

      .sector {
        min-width: 100px;
        padding: 12px;
        font-size: 12px;
      }

      .character-card {
        max-width: 300px;
        padding: 15px;
      }

      .modal-content {
        padding: 20px;
        margin: 20px;
      }

      .btn {
        padding: 10px 20px;
        font-size: 14px;
        min-height: 44px;
      }
    }

    @media (max-height: 700px) {
      .island-container {
        max-width: 250px;
      }

      .sector {
        min-width: 80px;
        padding: 8px;
        font-size: 11px;
      }

      .character-card {
        padding: 12px;
      }

      .character-avatar {
        width: 60px;
        height: 60px;
        font-size: 24px;
      }
    }
  </style>
</head>
<body>
  <div class="animated-background">
    <div class="floating-shapes">
      <div class="shape"></div>
      <div class="shape"></div>
      <div class="shape"></div>
      <div class="shape"></div>
      <div class="shape"></div>
    </div>
    <div class="grid-overlay"></div>
  </div>

  <div class="world-government-quest">
    <!-- Контроль звука -->
    <div class="sound-control">
      <button class="sound-btn" id="soundBtn">🔊</button>
    </div>

    <!-- Предупреждение -->
    <div id="warning-modal" class="modal active">
      <div class="modal-content">
        <div class="warning-header">
          <h2>⚠️ ВНИМАНИЕ</h2>
        </div>
        <div class="warning-body">
          <p><strong>Все совпадения случайны, все герои и персонажи вымышлены.</strong></p>
          <p>Цель не отразить действительность, а сделать имитацию тренинга по распределению определенных людей на удобные для тебя места.</p>
          <p>Это игра-симулятор для развития навыков управления персоналом и стратегического мышления. Чем больше будет ваша сфера влияния - тем больше вы будете получать опыта и MULACOIN!</p>
        </div>
        <div class="modal-footer">
          <button id="start-quest" class="btn btn-primary">Начать квест</button>
        </div>
      </div>
    </div>

    <!-- Основной интерфейс -->
    <div id="main-interface" class="main-interface hidden">
      <!-- Кнопка "На главную" -->
      <div class="header-controls">
        <button id="back-to-main" class="btn btn-secondary back-btn">
          <span class="back-icon">←</span>
          На главную
        </button>
      </div>
      
      <!-- Остров с секторами -->
      <div class="island-container">
        <img src="../assets/photovideo/ostrov.png" alt="Остров" class="island-image">
        
        <!-- Политический сектор -->
        <div class="sector political-sector" data-sector="political">
          <div class="sector-label">Политический штаб</div>
          <div class="sector-count">0/4</div>
          <div class="sector-members"></div>
        </div>

        <!-- Военный сектор -->
        <div class="sector military-sector" data-sector="military">
          <div class="sector-label">Военный штаб</div>
          <div class="sector-count">0/3</div>
          <div class="sector-members"></div>
        </div>

        <!-- Экономический сектор -->
        <div class="sector economic-sector" data-sector="economic">
          <div class="sector-label">Экономический штаб</div>
          <div class="sector-count">0/2</div>
          <div class="sector-members"></div>
        </div>

        <!-- Исследовательский сектор -->
        <div class="sector research-sector" data-sector="research">
          <div class="sector-label">Исследовательский штаб</div>
          <div class="sector-count">0/2</div>
          <div class="sector-members"></div>
        </div>

        <!-- Пропагандистский сектор -->
        <div class="sector propaganda-sector" data-sector="propaganda">
          <div class="sector-label">Пропагандический штаб</div>
          <div class="sector-count">0/3</div>
          <div class="sector-members"></div>
        </div>
      </div>

      <!-- Нижняя панель с персонажами -->
      <div class="bottom-panel">
        <div class="character-container">
          <div id="current-character" class="character-card">
            <!-- Персонаж будет загружен динамически -->
          </div>
          <button id="skip-character" class="btn btn-secondary">Пропустить</button>
        </div>
        
        <button id="finish-creation" class="btn btn-primary" disabled>Завершить создание</button>
      </div>
    </div>

    <!-- Модальное окно завершения -->
    <div id="finish-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Завершить создание мирового правительства?</h3>
        </div>
        <div class="modal-body">
          <p>Вы уверены, что хотите завершить формирование тайного мирового сообщества? После этого начнется сюжетная часть квеста.</p>
        </div>
        <div class="modal-footer">
          <button id="confirm-finish" class="btn btn-primary">Подтвердить</button>
          <button id="cancel-finish" class="btn btn-secondary">Отмена</button>
        </div>
      </div>
    </div>

    <!-- Модальное окно сюжета -->
    <div id="story-modal" class="modal story-modal">
      <div class="modal-content story-content">
        <div class="story-title" id="story-title"></div>
        <div class="story-text" id="story-text"></div>
        <div class="story-actions" id="story-actions"></div>
      </div>
    </div>

    <!-- Аудио элемент -->
    <audio id="horror-audio" loop>
      <source src="../assets/politics/horror.mp3" type="audio/mpeg">
    </audio>

    <!-- Видео элементы для фона -->
    <video id="meting-video" class="video-background" muted playsInline>
      <source src="../assets/politics/meting.mp4" type="video/mp4">
    </video>
    <video id="besporyadki-video" class="video-background" muted playsInline>
      <source src="../assets/politics/besporyadki.mp4" type="video/mp4">
    </video>
    <video id="razobla4enie-video" class="video-background" muted playsInline>
      <source src="../assets/politics/razobla4enie.mp4" type="video/mp4">
    </video>
    <video id="war-video" class="video-background" muted playsInline>
      <source src="../assets/politics/war.mp4" type="video/mp4">
    </video>
    <video id="puteshestvie-video" class="video-background" muted playsInline>
      <source src="../assets/politics/puteshestvie.mp4" type="video/mp4">
    </video>
    <video id="experement-video" class="video-background" muted playsInline>
      <source src="../assets/politics/experement.mp4" type="video/mp4">
    </video>
  </div>

  <script src="world-government.js"></script>
  <script src="world-government-stories.js"></script>
</body>
</html>
