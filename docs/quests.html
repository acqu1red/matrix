<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Центр Симуляций</title>
  
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="./quests.css" />
</head>
<body>

  <!-- Onboarding Quiz -->
  <div class="quiz-overlay hidden" id="quizOverlay">
    <div class="quiz-container">
      <!-- Step 1: Intro -->
      <div class="quiz-step active" data-step="0">
        <h2 class="quiz-title">Добро пожаловать</h2>
        <p class="quiz-intro">Ответьте на несколько вопросов, чтобы мы подобрали симуляции лично для вас.</p>
        <button class="quiz-start-button" data-action="next-step">Начать</button>
      </div>
      <!-- Step 2: Question 1 -->
      <div class="quiz-step" data-step="1">
        <p class="quiz-progress">Вопрос 1 из 3</p>
        <h3 class="quiz-question">Что для вас важнее в профессиональном развитии?</h3>
        <div class="quiz-options">
          <button class="quiz-option" data-archetype="biznesmen">Построение эффективной бизнес-модели и максимизация прибыли.</button>
          <button class="quiz-option" data-archetype="psiholog">Глубокое понимание психологии людей для успешных переговоров.</button>
          <button class="quiz-option" data-archetype="strategist">Разработка долгосрочных стратегий и анализ глобальных трендов.</button>
        </div>
      </div>
      <!-- Step 3: Question 2 -->
      <div class="quiz-step" data-step="2">
        <p class="quiz-progress">Вопрос 2 из 3</p>
        <h3 class="quiz-question">Какая задача кажется вам наиболее интересной?</h3>
        <div class="quiz-options">
          <button class="quiz-option" data-archetype="strategist">Управление сложными системами и незаметное влияние на события.</button>
          <button class="quiz-option" data-archetype="psiholog">Чтение невербальных сигналов и выявление скрытых мотивов.</button>
          <button class="quiz-option" data-archetype="biznesmen">Создание продукта, который захватит рынок и изменит правила игры.</button>
        </div>
      </div>
      <!-- Step 4: Question 3 -->
      <div class="quiz-step" data-step="3">
        <p class="quiz-progress">Вопрос 3 из 3</p>
        <h3 class="quiz-question">Выберите цитату, которая вам ближе:</h3>
        <div class="quiz-options">
          <button class="quiz-option" data-archetype="psiholog">"Не тот умен, кто умеет отличать добро от зла, а тот, кто из двух зол умеет выбирать меньшее."</button>
          <button class="quiz-option" data-archetype="strategist">"Кто владеет информацией, тот владеет миром."</button>
          <button class="quiz-option" data-archetype="biznesmen">"Лучший способ предсказать будущее — это создать его."</button>
        </div>
      </div>
      <!-- Step 5: Loading -->
      <div class="quiz-step" data-step="4">
        <h2 class="quiz-title">Анализируем ваши ответы...</h2>
        <div class="spinner"></div>
          </div>
          </div>
        </div>

  <div id="app" class="app hidden">
    <header class="header" data-animate>
      <div class="header-content">
        <h1 class="header-title">Центр Симуляций</h1>
        <a href="index.html" class="support-button">Поддержка</a>
          </div>
    </header>

    <main>
      <section class="featured-quests" data-animate>
        <h2 class="section-title">Приоритетные Симуляции</h2>
        <div class="swiper-container">
          <div class="swiper-wrapper" id="featuredQuestsWrapper">
            <!-- Сюда будут динамически добавляться квесты -->
          </div>
          <div class="swiper-pagination"></div>
        </div>
      </section>

      <section class="products-section" id="products-section">
        <div class="products-grid" id="productsGrid" data-animate>
          <!-- Сюда будут динамически добавляться продукты -->
        </div>
      </section>

      <section class="other-quests">
        <h2 class="section-title" data-animate>Другие симуляции</h2>
        <div class="quests-grid" id="otherQuestsGrid">
          <!-- Сюда будут динамически добавляться остальные квесты -->
        </div>
      </section>
    </main>
        </div>

  <!-- Информационные блоки внизу страницы -->
  <div class="info-section">
    <div class="info-links">
      <button class="info-link" data-modal="delivery">Информация о доставке</button>
      <button class="info-link" data-modal="contacts">Контакты</button>
      <button class="info-link" data-modal="terms">Пользовательское соглашение / Оферта</button>
    </div>
  </div>

  <!-- Модальные окна для информационных блоков -->
  <div id="deliveryModal" class="info-modal hidden">
    <div class="info-modal-content">
      <div class="info-modal-header">
        <h3>Информация о доставке</h3>
        <button class="info-modal-close">&times;</button>
      </div>
      <div class="info-modal-body">
        <p>После покупки вы сможете:</p>
        <ul>
          <li><strong>Просматривать гайд</strong> прямо внутри приложения MiniApp</li>
          <li><strong>Скачивать PDF</strong> для офлайн-изучения</li>
        </ul>
        <p>Доступ к материалам предоставляется мгновенно после подтверждения оплаты.</p>
      </div>
    </div>
  </div>

  <div id="contactsModal" class="info-modal hidden">
    <div class="info-modal-content">
      <div class="info-modal-header">
        <h3>Контакты</h3>
        <button class="info-modal-close">&times;</button>
      </div>
      <div class="info-modal-body">
        <div class="contact-item">
          <strong>Telegram:</strong> <a href="https://t.me/warpscythe" target="_blank">@warpscythe</a>
        </div>
        <div class="contact-item">
          <strong>Поддержка:</strong> <a href="https://t.me/support_bot" target="_blank">@support_bot</a>
        </div>
        <div class="contact-item">
          <strong>Email:</strong> support@example.com
        </div>
        <div class="contact-item">
          <strong>Время работы:</strong> 24/7
        </div>
      </div>
    </div>
  </div>

  <div id="termsModal" class="info-modal hidden">
    <div class="info-modal-content">
      <div class="info-modal-header">
        <h3>Пользовательское соглашение / Оферта</h3>
        <button class="info-modal-close">&times;</button>
      </div>
      <div class="info-modal-body">
        <h4>1. Общие положения</h4>
        <p>Настоящее Пользовательское соглашение (далее – «Соглашение») регулирует отношения между пользователем (далее – «Пользователь») и администрацией MiniApp (далее – «Администрация») по использованию сервиса.</p>
        
        <h4>2. Предмет соглашения</h4>
        <p>Администрация предоставляет Пользователю доступ к образовательным материалам, курсам и контенту через Telegram MiniApp.</p>
        
        <h4>3. Порядок использования</h4>
        <p>3.1. Пользователь обязуется использовать материалы исключительно в личных целях.<br>
        3.2. Запрещается передача, копирование и распространение материалов третьим лицам.<br>
        3.3. Все материалы защищены авторским правом.</p>
        
        <h4>4. Оплата и доступ</h4>
        <p>4.1. Доступ к материалам предоставляется после подтверждения оплаты.<br>
        4.2. Оплата производится через Telegram Stars или банковские карты.<br>
        4.3. Возврат средств осуществляется в соответствии с законодательством РФ.</p>
        
        <h4>5. Ответственность</h4>
        <p>5.1. Администрация не несет ответственности за результаты применения полученных знаний.<br>
        5.2. Пользователь самостоятельно несет ответственность за соблюдение законодательства.</p>
        
        <h4>6. Заключительные положения</h4>
        <p>6.1. Соглашение вступает в силу с момента принятия Пользователем.<br>
        6.2. Администрация оставляет за собой право изменять условия Соглашения.<br>
        6.3. По всем вопросам обращайтесь в службу поддержки.</p>
        
        <p><strong>Дата последнего обновления:</strong> 2024</p>
      </div>
    </div>
  </div>

  <!-- Оверлей для модальных окон -->
  <div id="infoModalOverlay" class="info-modal-overlay hidden"></div>

  <!-- Product Modals will be injected here by JS -->
  <div id="modalContainer"></div>
  
  <!-- PDF Viewer Modal -->
  <div class="pdf-viewer-overlay hidden" id="pdfViewerOverlay">
    <div class="pdf-viewer-container">
      <div class="pdf-viewer-header">
        <h3 id="pdfTitle">Название документа</h3>
        <button class="pdf-viewer-close" id="pdfViewerClose">&times;</button>
      </div>
      <div class="pdf-content">
        <iframe id="pdfFrame" src="" frameborder="0"></iframe>
      </div>
      <div class="pdf-viewer-footer">
        <a href="#" id="pdfDownloadLink" download class="pdf-download-button">Скачать</a>
  </div>
    </div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script src="./supabaseClient.js"></script>
  <script src="./quests.js"></script>
</body>
</html>
