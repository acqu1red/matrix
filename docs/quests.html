<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Центр Симуляций</title>
  
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="./quests.css" />
</head>
<body>

  <!-- Onboarding Quiz -->
  <div class="quiz-overlay hidden" id="quizOverlay">
    <div class="quiz-container">
      <!-- Step 1: Intro -->
      <div class="quiz-step active" data-step="0">
        <h2 class="quiz-title">Добро пожаловать</h2>
        <p class="quiz-intro">Ответьте на несколько вопросов, чтобы мы подобрали симуляции лично для вас.</p>
        <button class="quiz-start-button" data-action="next-step">Начать</button>
      </div>
      <!-- Step 2: Question 1 -->
      <div class="quiz-step" data-step="1">
        <p class="quiz-progress">Вопрос 1 из 3</p>
        <h3 class="quiz-question">Что для вас важнее в профессиональном развитии?</h3>
        <div class="quiz-options">
          <button class="quiz-option" data-archetype="biznesmen">Построение эффективной бизнес-модели и максимизация прибыли.</button>
          <button class="quiz-option" data-archetype="psiholog">Глубокое понимание психологии людей для успешных переговоров.</button>
          <button class="quiz-option" data-archetype="strategist">Разработка долгосрочных стратегий и анализ глобальных трендов.</button>
        </div>
      </div>
      <!-- Step 3: Question 2 -->
      <div class="quiz-step" data-step="2">
        <p class="quiz-progress">Вопрос 2 из 3</p>
        <h3 class="quiz-question">Какая задача кажется вам наиболее интересной?</h3>
        <div class="quiz-options">
          <button class="quiz-option" data-archetype="strategist">Управление сложными системами и незаметное влияние на события.</button>
          <button class="quiz-option" data-archetype="psiholog">Чтение невербальных сигналов и выявление скрытых мотивов.</button>
          <button class="quiz-option" data-archetype="biznesmen">Создание продукта, который захватит рынок и изменит правила игры.</button>
        </div>
      </div>
      <!-- Step 4: Question 3 -->
      <div class="quiz-step" data-step="3">
        <p class="quiz-progress">Вопрос 3 из 3</p>
        <h3 class="quiz-question">Выберите цитату, которая вам ближе:</h3>
        <div class="quiz-options">
          <button class="quiz-option" data-archetype="psiholog">"Не тот умен, кто умеет отличать добро от зла, а тот, кто из двух зол умеет выбирать меньшее."</button>
          <button class="quiz-option" data-archetype="strategist">"Кто владеет информацией, тот владеет миром."</button>
          <button class="quiz-option" data-archetype="biznesmen">"Лучший способ предсказать будущее — это создать его."</button>
        </div>
      </div>
      <!-- Step 5: Loading -->
      <div class="quiz-step" data-step="4">
        <h2 class="quiz-title">Анализируем ваши ответы...</h2>
        <div class="spinner"></div>
          </div>
          </div>
        </div>

  <div id="app" class="app hidden">
    <header class="header" data-animate>
      <div class="header-content">
        <h1 class="header-title">Центр Симуляций</h1>
        <a href="index.html" class="support-button">Поддержка</a>
          </div>
    </header>

    <main>
      <section class="featured-quests" data-animate>
        <h2 class="section-title">Приоритетные Симуляции</h2>
        <div class="swiper-container">
          <div class="swiper-wrapper" id="featuredQuestsWrapper">
            <!-- Сюда будут динамически добавляться квесты -->
          </div>
          <div class="swiper-pagination"></div>
        </div>
      </section>

      <section class="products-section" id="products-section">
        <div class="products-grid" id="productsGrid" data-animate>
          <!-- Сюда будут динамически добавляться продукты -->
        </div>
      </section>

      <section class="other-quests">
        <h2 class="section-title" data-animate>Другие симуляции</h2>
        <div class="quests-grid" id="otherQuestsGrid">
          <!-- Сюда будут динамически добавляться остальные квесты -->
        </div>
      </section>

      <!-- Информационные кнопки -->
      <section class="info-section">
        <div class="info-buttons">
          <button class="info-button" data-modal="delivery">Доставка</button>
          <button class="info-button" data-modal="contacts">Контакты</button>
          <button class="info-button" data-modal="offer">Оферта</button>
        </div>
      </section>
    </main>
        </div>

  <!-- Product Modals will be injected here by JS -->
  <div id="modalContainer"></div>
  
  <!-- PDF Viewer Modal -->
  <div class="pdf-viewer-overlay hidden" id="pdfViewerOverlay">
    <div class="pdf-viewer-container">
      <div class="pdf-viewer-header">
        <h3 id="pdfTitle">Название документа</h3>
        <button class="pdf-viewer-close" id="pdfViewerClose">&times;</button>
      </div>
      <div class="pdf-content">
        <iframe id="pdfFrame" src="" frameborder="0"></iframe>
      </div>
      <div class="pdf-viewer-footer">
        <a href="#" id="pdfDownloadLink" download class="pdf-download-button">Скачать</a>
      </div>
    </div>
  </div>

  <!-- Информационные модальные окна -->
  <div class="info-modal-overlay hidden" id="infoModalOverlay">
    <!-- Модальное окно "Доставка" -->
    <div class="info-modal" id="deliveryModal">
      <div class="info-modal-content">
        <div class="info-modal-header">
          <h3>Доставка</h3>
          <button class="info-modal-close">&times;</button>
        </div>
        <div class="info-modal-body">
          <h4>Как получить товар после покупки:</h4>
          <p>После успешной оплаты вы получите доступ к приобретенному материалу двумя способами:</p>
          <ul>
            <li><strong>Просмотр в приложении:</strong> Откройте Mini App и читайте гайд прямо в Telegram</li>
            <li><strong>Скачивание PDF:</strong> Загрузите документ в формате PDF для офлайн-изучения</li>
          </ul>
          <p>Доступ к материалам предоставляется мгновенно после подтверждения платежа.</p>
        </div>
      </div>
    </div>

    <!-- Модальное окно "Контакты" -->
    <div class="info-modal" id="contactsModal">
      <div class="info-modal-content">
        <div class="info-modal-header">
          <h3>Контакты</h3>
          <button class="info-modal-close">&times;</button>
        </div>
        <div class="info-modal-body">
          <h4>Свяжитесь с нами:</h4>
          <div class="contact-item">
            <strong>Telegram:</strong> <a href="https://t.me/warpscythe" target="_blank">@warpscythe</a>
          </div>
          <div class="contact-item">
            <strong>Поддержка:</strong> <a href="https://t.me/warpscythe" target="_blank">@warpscythe</a>
          </div>
          <div class="contact-item">
            <strong>Время работы:</strong> Ежедневно с 9:00 до 21:00 (МСК)
          </div>
          <p>Мы готовы ответить на все ваши вопросы и помочь с выбором подходящих материалов.</p>
        </div>
      </div>
    </div>

    <!-- Модальное окно "Оферта" -->
    <div class="info-modal" id="offerModal">
      <div class="info-modal-content">
        <div class="info-modal-header">
          <h3>Публичная оферта</h3>
          <button class="info-modal-close">&times;</button>
        </div>
        <div class="info-modal-body">
          <h4>Общие положения</h4>
          <p>Настоящий документ является публичной офертой и содержит все существенные условия договора на оказание информационно-образовательных услуг.</p>
          
          <h4>Предмет договора</h4>
          <p>Предоставление доступа к информационным материалам, курсам и гайдам в области психологии, бизнеса и стратегического мышления.</p>
          
          <h4>Порядок оказания услуг</h4>
          <ul>
            <li>Услуги оказываются в электронном виде через Telegram Mini App</li>
            <li>Доступ предоставляется после подтверждения оплаты</li>
            <li>Материалы доступны для просмотра онлайн и скачивания в PDF</li>
          </ul>
          
          <h4>Стоимость и оплата</h4>
          <p>Стоимость услуг указана в рублях и звездах Telegram. Оплата производится через Telegram Stars или банковские карты.</p>
          
          <h4>Права и обязанности</h4>
          <p>Покупатель получает неисключительное право на использование материалов в личных целях. Запрещается распространение, копирование и коммерческое использование.</p>
          
          <h4>Ответственность</h4>
          <p>Материалы предоставляются "как есть". Мы не несем ответственности за результаты применения полученной информации.</p>
          
          <h4>Заключительные положения</h4>
          <p>Договор вступает в силу с момента оплаты. Споры решаются путем переговоров. Применяется законодательство РФ.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script src="./supabaseClient.js"></script>
  <script src="./quests.js"></script>
</body>
</html>
