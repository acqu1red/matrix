<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>–ö–≤–µ—Å—Ç—ã</title>
  
  <!-- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∏–ª–∏ inline –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ -->
  <style>
    /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #161412 0%, #2a1f1a 15%, #5a473a 30%, #8b7d6b 45%, #c7bdb1 60%, #ddd9d6 75%, #f5f3f0 85%, #ffffff 100%);
      color: #161412;
      line-height: 1.6; 
      overflow-x: hidden; 
      min-height: 100vh;
      position: relative;
    }
    
    /* –ö—Ä–∞—Å–∏–≤—ã–π —Ñ–æ–Ω–æ–≤—ã–π —É–∑–æ—Ä */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(199, 189, 177, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(90, 71, 58, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(221, 217, 214, 0.05) 0%, transparent 50%);
      z-index: -1;
      pointer-events: none;
    }
    
    .app { opacity: 1 !important; }
    .loading-overlay { display: none !important; }
    
    /* –°–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ */
    .card, .btn, .glass { opacity: 0; transition: opacity 0.3s ease; }
    .loaded .card, .loaded .btn, .loaded .glass { opacity: 1; }
    
    /* –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è header */
    .topbar { 
      position: sticky; top: 0; z-index: 100;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 243, 240, 0.95) 100%); 
      backdrop-filter: blur(20px);
      border-bottom: 3px solid transparent;
      background-clip: padding-box;
      border-image: linear-gradient(90deg, #5a473a, #c7bdb1, #ddd9d6) 1;
      padding: 20px 24px;
      box-shadow: 0 8px 32px rgba(22, 20, 18, 0.08);
    }
    
    .brand h1 { 
      font-size: 28px; 
      font-weight: 800; 
      background: linear-gradient(135deg, #161412 0%, #5a473a 50%, #8b7d6b 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 2px 4px rgba(22, 20, 18, 0.1);
    }
    
    /* –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–≤–µ—Å—Ç–æ–≤ */
    .quests-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
      gap: 24px; 
      padding: 24px; 
    }
    
    .card { 
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 243, 240, 0.95) 100%); 
      border: 2px solid transparent;
      background-clip: padding-box;
      border-image: linear-gradient(135deg, #ddd9d6, #c7bdb1, #5a473a) 1;
      border-radius: 24px; 
      padding: 28px; 
      backdrop-filter: blur(20px);
      box-shadow: 0 12px 40px rgba(22, 20, 18, 0.08);
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #5a473a, #8b7d6b, #c7bdb1, #ddd9d6);
      transform: scaleX(0);
      transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card:hover::before {
      transform: scaleX(1);
    }
    
    .btn { 
      padding: 14px 28px; 
      border: 2px solid transparent;
      background: linear-gradient(135deg, #5a473a 0%, #8b7d6b 50%, #c7bdb1 100%); 
      color: #ffffff; 
      cursor: pointer; 
      font-weight: 600;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(90, 71, 58, 0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn.primary { 
      background: linear-gradient(135deg, #5a473a 0%, #8b7d6b 50%, #c7bdb1 100%); 
      color: #ffffff; 
    }
    
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(90, 71, 58, 0.4);
    }
  </style>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Sora:wght@500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./quests.css" />
  
  <!-- Preload critical resources -->
  <link rel="preload" href="./assets/rulette/case_open.png" as="image">
  <link rel="preload" href="./assets/photovideo/ruletka.png" as="image">
</head>
<body>
  <!-- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp -->
  <script>
    // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
    (function() {
      // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—à–∏—Ä—è–µ–º MiniApp
      if (window.Telegram && window.Telegram.WebApp) {
        try {
          window.Telegram.WebApp.expand();
          window.Telegram.WebApp.enableClosingConfirmation();
          document.body.classList.add('tg-ready');
          console.log('Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ');
        } catch (e) {
          console.log('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram WebApp:', e);
        }
      } else {
        // Fallback - –∑–∞–≥—Ä—É–∂–∞–µ–º SDK –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º
        var s = document.createElement('script');
        s.src = "https://telegram.org/js/telegram-web-app.js";
        s.onload = function() {
          if (window.Telegram && window.Telegram.WebApp) {
            try {
              window.Telegram.WebApp.expand();
              window.Telegram.WebApp.enableClosingConfirmation();
              document.body.classList.add('tg-ready');
              console.log('Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ SDK');
            } catch (e) {
              console.log('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ SDK:', e);
            }
          }
        };
        document.head.appendChild(s);
      }
    })();
  </script>

  <div id="app" class="app">
    <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π header —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ -->
    <header class="glass topbar">
      <div class="brand">
        <div class="logo-container">
          <span class="logoGlow"></span>
          <div class="logo-rings">
            <div class="ring ring-1"></div>
            <div class="ring ring-2"></div>
            <div class="ring ring-3"></div>
          </div>
        </div>
        <h1>üöÄ –ö–≤–µ—Å—Ç—ã</h1>
      </div>
      <div class="actions">
        <button id="btnHistory" class="btn ghost" aria-label="–ò—Å—Ç–æ—Ä–∏—è">
          <span class="btn-icon">üìä</span>
          <span class="btn-text">–ò—Å—Ç–æ—Ä–∏—è</span>
        </button>
      </div>
    </header>

    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å –≤–∞–ª—é—Ç—ã —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ -->
    <div class="currency-bar glass">
      <div class="currency-info">
        <button class="currency-button mulacoin-btn" onclick="showMulacoinInfo()">
          <div class="mulacoin-display">
            <div class="currency-icon-container">
              <span class="currency-icon">ü™ô</span>
              <div class="icon-glow"></div>
            </div>
            <div class="currency-text">
              <span class="currency-amount" id="mulacoinAmount">0</span>
              <span class="currency-label">MULACOIN</span>
            </div>
          </div>
        </button>
        <button class="currency-button level-btn" onclick="showLevelInfo()">
          <div class="level-display">
            <div class="level-icon-container">
              <span class="level-icon">‚≠ê</span>
              <div class="level-glow"></div>
            </div>
            <div class="level-text">
              <span class="level-text-main">–£—Ä–æ–≤–µ–Ω—å <span id="currentLevel">1</span></span>
              <span class="level-progress" id="levelProgress">0/100</span>
            </div>
          </div>
        </button>
      </div>
    </div>

    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å–µ–∫—Ü–∏—è –∫–µ–π—Å–∞ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ -->
    <section class="case-section" id="caseSection">
      <div class="case-background">
        <div class="case-aura primary"></div>
        <div class="case-aura secondary"></div>
        <div class="case-aura tertiary"></div>
      </div>
      <div class="case-frame">
        <button class="case-button" id="mysteryCaseBtn">
          <div class="case-image-container">
            <img src="assets/rulette/case_open.png" alt="–¢–∞–π–Ω—ã–π –∫–µ–π—Å" class="case-image" id="caseImage">
            <div class="case-overlay"></div>
          </div>
        </button>
        
        <div class="case-caption">
          <h2 class="case-title">–¢–∞–π–Ω—ã–π –∫–µ–π—Å</h2>
          <p class="case-description">–ß—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏? –û—Ç–∫—Ä–æ–π –∏ –ø–æ–ª—É—á–∏ —Å—é—Ä–ø—Ä–∏–∑, –∫–æ—Ç–æ—Ä—ã–π –≤–∑–æ—Ä–≤–µ—Ç —Ç–≤–æ–π –º–æ–∑–≥! –†–∏—Å–∫–Ω–∏ –∏–ª–∏ –ø–æ—Ç–µ—Ä—è–π –Ω–∞–≥—Ä–∞–¥—É –Ω–∞–≤—Å–µ–≥–¥–∞...</p>
          <div class="case-sparkles">
            <span class="sparkle">‚óè</span>
            <span class="sparkle">‚óè</span>
            <span class="sparkle">‚óè</span>
          </div>
        </div>
      </div>
    </section>

    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è hero —Å–µ–∫—Ü–∏—è —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ -->
    <section class="hero">
      <div class="heroCopy glass">
        <div class="hero-header">
          <h2 class="hero-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π!</h2>
          <div class="title-underline"></div>
        </div>
        <p class="hero-description">–í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø—É—Ç—å –∫ —É—Å–ø–µ—Ö—É! –ö–∞–∂–¥—ã–π –∫–≤–µ—Å—Ç - —ç—Ç–æ –Ω–æ–≤–∞—è —Å—Ç—É–ø–µ–Ω—å–∫–∞ –∫ –≤–µ—Ä—à–∏–Ω–µ. –ì–æ—Ç–æ–≤ —Å—Ç–∞—Ç—å –ª–µ–≥–µ–Ω–¥–æ–π?</p>
        <div class="hero-stats">
          <div class="hero-stat">
            <div class="stat-icon">‚óè</div>
            <div class="stat-number">7</div>
            <div class="stat-label">–ö–≤–µ—Å—Ç–æ–≤</div>
          </div>
          <div class="hero-stat">
            <div class="stat-icon">‚óè</div>
            <div class="stat-number">‚àû</div>
            <div class="stat-label">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π</div>
          </div>
          <div class="hero-stat">
            <div class="stat-icon">‚óè</div>
            <div class="stat-number">100%</div>
            <div class="stat-label">–£—Å–ø–µ—Ö–∞</div>
          </div>
        </div>
      </div>
    </section>

    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞ –∫–≤–µ—Å—Ç–æ–≤ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ -->
    <section class="quests" id="quests">
      <div class="quests-header">
        <h3 class="quests-title">–í—ã–±–µ—Ä–∏ —Å–≤–æ–π –∫–≤–µ—Å—Ç</h3>
        <div class="quests-subtitle">–ö–∞–∂–¥—ã–π –ø—É—Ç—å –≤–µ–¥–µ—Ç –∫ —É—Å–ø–µ—Ö—É</div>
      </div>
      <div class="quests-grid">
        <!-- –ü–µ—Ä–≤—ã–π –±–∏–∑–Ω–µ—Å -->
        <div class="card business-card" data-style="neo" data-quest="copy">
          <div class="card-header">
            <div class="label business-label">–ë–∏–∑–Ω–µ—Å</div>
            <div class="card-icon">‚óè</div>
          </div>
          <h3 class="card-title">–¢–≤–æ–π –ø–µ—Ä–≤—ã–π –±–∏–∑–Ω–µ—Å</h3>
          <div class="description">–û—Ç –Ω–∞–π–º–∞ –¥–æ IPO –∑–∞ 10 –º–∏–Ω—É—Ç! –°–æ–±–µ—Ä–∏ –∫–æ–º–∞–Ω–¥—É –º–µ—á—Ç—ã –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏ —Å—Ç–∞—Ä—Ç–∞–ø –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—é. –ö—Ç–æ —Å–∫–∞–∑–∞–ª, —á—Ç–æ –Ω–µ–ª—å–∑—è —Å—Ç–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω–µ—Ä–æ–º –∑–∞ –æ–¥–∏–Ω –∫–≤–µ—Å—Ç?</div>
          <div class="meta">
            <div class="tag medium">–°—Ä–µ–¥–Ω–∏–π</div>
            <div class="tag variation">–í–∞—Ä–∏–∞—Ü–∏—è #1/7</div>
          </div>
          <div class="cta">
            <button class="btn primary start">–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
            <button class="btn ghost details">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
        </div>

        <!-- –ú–∏—Ä–æ–≤–æ–µ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ -->
        <div class="card conspiracy-card" data-style="conspiracy" data-quest="world-government">
          <div class="card-header">
            <div class="label conspiracy-label">–°—Ç—Ä–∞—Ç–µ–≥–∏—è</div>
            <div class="card-icon">‚óè</div>
          </div>
          <h3 class="card-title">–ú–∏—Ä–æ–≤–æ–µ —Ç–∞–π–Ω–æ–µ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ</h3>
          <div class="description">–¢—ã –∑–Ω–∞–µ—à—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞ –∫—É–ª–∏—Å–∞–º–∏? –°–æ–∑–¥–∞–π —Å–≤–æ—é —Ç–∞–π–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ —É–ø—Ä–∞–≤–ª—è–π –º–∏—Ä–æ–º –∏–∑ —Ç–µ–Ω–∏.</div>
          <div class="meta">
            <div class="tag hard">–°–ª–æ–∂–Ω—ã–π</div>
            <div class="tag variation">–í–∞—Ä–∏–∞—Ü–∏—è #2/7</div>
          </div>
          <div class="cta">
            <button class="btn primary start">–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
            <button class="btn ghost details">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
        </div>

        <!-- –Ø–∑—ã–∫ —Ç–µ–ª–∞ -->
        <div class="card psychology-card" data-style="neo" data-quest="bodylang">
          <div class="card-header">
            <div class="label psychology-label">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</div>
            <div class="card-icon">‚óè</div>
          </div>
          <h3 class="card-title">–Ø–∑—ã–∫ —Ç–µ–ª–∞</h3>
          <div class="description">–ß–∏—Ç–∞–π –º—ã—Å–ª–∏ –ø–æ –º–∏–∫—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è–º! –°—Ç–∞–Ω—å —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–º –ª–∂–∏ –∏ —Ä–∞–∑–≥–∞–¥–∞–π –≤—Å–µ —Ç–∞–π–Ω—ã —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞. –®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å –Ω–µ—Ä–≤–Ω–æ –∫—É—Ä–∏—Ç –≤ —Å—Ç–æ—Ä–æ–Ω–∫–µ.</div>
          <div class="meta">
            <div class="tag medium">–°—Ä–µ–¥–Ω–∏–π</div>
            <div class="tag variation">–í–∞—Ä–∏–∞—Ü–∏—è #3/7</div>
          </div>
          <div class="cta">
            <button class="btn primary start">–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
            <button class="btn ghost details">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
        </div>

        <!-- –ò–º–ø–µ—Ä–∏—è –≤–ª–∏—è–Ω–∏—è -->
        <div class="card influence-card" data-style="neo" data-quest="funnel">
          <div class="card-header">
            <div class="label influence-label">–í–ª–∏—è–Ω–∏–µ</div>
            <div class="card-icon">üëë</div>
          </div>
          <h3 class="card-title">–ò–º–ø–µ—Ä–∏—è –≤–ª–∏—è–Ω–∏—è</h3>
          <div class="description">–°—Ç–∞–Ω—å –º–µ–¥–∏–∞-–º–∞–≥–Ω–∞—Ç–æ–º! –°–æ–∑–¥–∞–π –∫–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Å—Ç–∞–≤–∏—Ç –º–∏–ª–ª–∏–æ–Ω—ã –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∑–∞–ª–∏–ø–∞—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω–∞—Ö. –û—Ç TikTok –¥–æ Netflix - —Ç–≤–æ—è –∏–º–ø–µ—Ä–∏—è!</div>
          <div class="meta">
            <div class="tag hard">–°–ª–æ–∂–Ω—ã–π</div>
            <div class="tag variation">–í–∞—Ä–∏–∞—Ü–∏—è #4/7</div>
          </div>
          <div class="cta">
            <button class="btn primary start">–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
            <button class="btn ghost details">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
        </div>

        <!-- –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è -->
        <div class="card psychology-card" data-style="neo" data-quest="psychology">
          <div class="card-header">
            <div class="label psychology-label">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</div>
            <div class="card-icon">üí≠</div>
          </div>
          <h3 class="card-title">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –∑–∞—Ä–∞–±–æ—Ç–∫–∞</h3>
          <div class="description">–ó–∞—Å—Ç–∞–≤—å –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å–∞–º–∏–º –ø—Ä–æ—Å–∏—Ç—å –ø–æ–≤—ã—Å–∏—Ç—å —Ü–µ–Ω—É! –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –ø–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è–º –≤ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞—Ö. –î–µ–Ω—å–≥–∏ —Å–∞–º–∏ –ø—Ä–∏–¥—É—Ç –∫ —Ç–µ–±–µ!</div>
          <div class="meta">
            <div class="tag medium">–°—Ä–µ–¥–Ω–∏–π</div>
            <div class="tag variation">–í–∞—Ä–∏–∞—Ü–∏—è #5/7</div>
          </div>
          <div class="cta">
            <button class="btn primary start">–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
            <button class="btn ghost details">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
        </div>

        <!-- –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ -->
        <div class="card strategy-card" data-style="neo" data-quest="competitors">
          <div class="card-header">
            <div class="label strategy-label">–°—Ç—Ä–∞—Ç–µ–≥–∏—è</div>
            <div class="card-icon">üîç</div>
          </div>
          <h3 class="card-title">–ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤</h3>
          <div class="description">–†–∞–∑–≤–µ–¥–∞–π –≤—Ä–∞–∂–µ—Å–∫—É—é —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é! –ò–∑—É—á–∏ —Å–ª–∞–±–æ—Å—Ç–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –∏ –Ω–∞–Ω–µ—Å–∏ —É–¥–∞—Ä –≤ —Å–∞–º–æ–µ —Å–µ—Ä–¥—Ü–µ. –í–æ–π–Ω–∞ –∑–∞ —Ä—ã–Ω–æ–∫ - —Ç–≤–æ—è –∏–≥—Ä–∞!</div>
          <div class="meta">
            <div class="tag hard">–°–ª–æ–∂–Ω—ã–π</div>
            <div class="tag variation">–í–∞—Ä–∏–∞—Ü–∏—è #6/7</div>
          </div>
          <div class="cta">
            <button class="btn primary start">–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
            <button class="btn ghost details">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
        </div>

        <!-- –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ -->
        <div class="card analytics-card" data-style="neo" data-quest="trends">
          <div class="card-header">
            <div class="label analytics-label">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
            <div class="card-icon">‚óè</div>
          </div>
          <h3 class="card-title">–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤</h3>
          <div class="description">–ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–π –±—É–¥—É—â–µ–µ —Ä—ã–Ω–∫–∞! –°—Ç–∞–Ω—å –ø—Ä–æ—Ä–æ–∫–æ–º –±–∏–∑–Ω–µ—Å–∞ –∏ –ø–æ–π–º–∞–π –≤–æ–ª–Ω—É —Ç—Ä–µ–Ω–¥–∞ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∞ –Ω–∞–∫—Ä–æ–µ—Ç –≤—Å–µ—Ö. –ì—É–≥–ª –±—É–¥–µ—Ç –∑–∞–≤–∏–¥–æ–≤–∞—Ç—å —Ç–≤–æ–µ–π –∏–Ω—Ç—É–∏—Ü–∏–∏!</div>
          <div class="meta">
            <div class="tag hard">–°–ª–æ–∂–Ω—ã–π</div>
            <div class="tag variation">–í–∞—Ä–∏–∞—Ü–∏—è #7/7</div>
          </div>
          <div class="cta">
            <button class="btn primary start">–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
            <button class="btn ghost details">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
          </div>
        </div>
      </div>
    </section>

    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π footer —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ -->
    <footer class="foot glass">
      <div class="footer-content">
        <div class="footer-decoration">
          <span class="decoration-line"></span>
          <span class="decoration-icon">‚ú®</span>
          <span class="decoration-line"></span>
        </div>
        <div class="hint">
          <span>–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏. –ù–∏–∫–∞–∫–∏—Ö –æ—Ç–≤–ª–µ–∫–∞—é—â–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ - —Ç–æ–ª—å–∫–æ —Ç–≤–æ–∏ —Ü–µ–ª–∏ –∏ –∞–º–±–∏—Ü–∏–∏!</span>
        </div>
      </div>
    </footer>
  </div>

  <!-- –ú–æ–¥–∞–ª -->
  <div id="modal" class="modal">
    <div class="modalContent glass">
      <button class="close" id="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      <div id="modalBody"></div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π -->
  <script>
    // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    const QUEST_DATA = {
      'copy': { 
        name: 'üè¢ –¢–≤–æ–π –ø–µ—Ä–≤—ã–π –±–∏–∑–Ω–µ—Å', 
        description: '–°–æ–∑–¥–∞–π –∏ —É–ø—Ä–∞–≤–ª—è–π —Å–≤–æ–∏–º –±–∏–∑–Ω–µ—Å–æ–º —Å –Ω—É–ª—è.',
        difficulty: 'medium',
        rewards: { mulacoin: 3, exp: 200 }
      },
      'world-government': { 
        name: 'üåç –ú–∏—Ä–æ–≤–æ–µ —Ç–∞–π–Ω–æ–µ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ', 
        description: '–°–æ–∑–¥–∞–π –º–∏—Ä–æ–≤–æ–µ —Ç–∞–π–Ω–æ–µ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º.',
        difficulty: 'hard',
        rewards: { mulacoin: 5, exp: 1000 }
      },
      'bodylang': { 
        name: 'üß† –Ø–∑—ã–∫ —Ç–µ–ª–∞', 
        description: '–†–∞—Å–ø–æ–∑–Ω–∞–π –Ω–µ–≤–µ—Ä–±–∞–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã 2D‚Äë–ø–µ—Ä—Å–æ–Ω–∞–∂–∞.',
        difficulty: 'medium',
        rewards: { mulacoin: 3, exp: 500 }
      },
      'funnel': { 
        name: 'üëë –ò–º–ø–µ—Ä–∏—è –≤–ª–∏—è–Ω–∏—è', 
        description: '–°–æ–∑–¥–∞–π –º–µ–¥–∏–∞-–∏–º–ø–µ—Ä–∏—é –∏ —É–ø—Ä–∞–≤–ª—è–π –º–∞—Å—Å–æ–≤—ã–º —Å–æ–∑–Ω–∞–Ω–∏–µ–º.',
        difficulty: 'hard',
        rewards: { mulacoin: 5, exp: 200 }
      },
      'psychology': { 
        name: 'üí≠ –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –∑–∞—Ä–∞–±–æ—Ç–∫–∞', 
        description: '–ò—Å–ø–æ–ª—å–∑—É–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤.',
        difficulty: 'medium',
        rewards: { mulacoin: 3, exp: 500 }
      },
      'competitors': { 
        name: 'üîç –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤', 
        description: '–ò–∑—É—á–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—É—é —Å—Ä–µ–¥—É –∏ –≤—ã–±–µ—Ä–∏ –Ω–∞–∏–±–æ–ª–µ–µ —Å–∏–ª—å–Ω–æ–≥–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞.',
        difficulty: 'hard',
        rewards: { mulacoin: 5, exp: 120 }
      },
      'trends': { 
        name: 'üìä –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤', 
        description: '–°—Ç–∞–Ω—å –º–∞—Å—Ç–µ—Ä–æ–º —Ä—ã–Ω–æ—á–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ —Ç—Ä–µ–Ω–¥–æ–≤.',
        difficulty: 'hard',
        rewards: { mulacoin: 4, exp: 200 }
      }
    };

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    let appState = {
      isInitialized: false,
      userData: {
        mulacoin: 0,
        exp: 0,
        level: 1
      }
    };

    // –£—Ç–∏–ª–∏—Ç—ã
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => document.querySelectorAll(sel);

    // –§—É–Ω–∫—Ü–∏—è toast
    function showToast(message, type = 'info') {
      const toast = $('#toast');
      if (!toast) return;
      
      toast.textContent = message;
      toast.className = `toast show ${type}`;
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª–∞
    function showModal(content) {
      const modal = $('#modal');
      const modalBody = $('#modalBody');
      
      if (!modal || !modalBody) return;
      
      modalBody.innerHTML = content;
      modal.classList.add('show');
    }

    // –§—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∞
    function hideModal() {
      const modal = $('#modal');
      if (modal) {
        modal.classList.remove('show');
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ MULACOIN
    function showMulacoinInfo() {
      const content = `
        <div class="mulacoin-info">
          <div class="info-header">
            <span class="info-icon">ü™ô</span>
            <h3>–ß—Ç–æ —Ç–∞–∫–æ–µ MULACOIN?</h3>
          </div>
          <div class="info-content">
            <p class="info-description">
              <strong>MULACOIN</strong> - —ç—Ç–æ –∑–æ–ª–æ—Ç–∞—è –≤–∞–ª—é—Ç–∞ –Ω–∞—à–µ–≥–æ –º–∏—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –∏ –ø—Ä–∏–∑–∞–º!
            </p>
            
            <div class="info-section">
              <h4>–ö–∞–∫ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å MULACOIN:</h4>
              <ul class="earn-list">
                <li><span class="earn-icon">‚óè</span> –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤</li>
                <li><span class="earn-icon">‚óè</span> –ö—Ä—É—á–µ–Ω–∏–µ –∫–µ–π—Å–∞</li>
                <li><span class="earn-icon">‚óè</span> –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –Ω–∞–≥—Ä–∞–¥—ã</li>
                <li><span class="earn-icon">‚óè</span> –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã</li>
                <li><span class="earn-icon">‚óè</span> –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</li>
              </ul>
            </div>
            
            <div class="info-section">
              <h4>–ù–∞ —á—Ç–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å MULACOIN:</h4>
              <ul class="spend-list">
                <li><span class="spend-icon">‚óè</span> –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫—Ä—É—á–µ–Ω–∏—è –∫–µ–π—Å–∞</li>
                <li><span class="spend-icon">‚óè</span> –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–º–∏—É–º –∫–≤–µ—Å—Ç–æ–≤</li>
                <li><span class="spend-icon">‚óè</span> –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</li>
                <li><span class="spend-icon">‚óè</span> –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è</li>
                <li><span class="spend-icon">‚óè</span> –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</li>
              </ul>
            </div>
            
            <div class="info-tip">
              <span class="tip-icon">‚óè</span>
              <strong>–°–æ–≤–µ—Ç:</strong> –ù–∞–∫–∞–ø–ª–∏–≤–∞–π MULACOIN –¥–ª—è –æ—Å–æ–±—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π! –ß–µ–º –±–æ–ª—å—à–µ —É —Ç–µ–±—è –∑–æ–ª–æ—Ç–∞, —Ç–µ–º –≤—ã—à–µ —Ç–≤–æ–∏ —à–∞–Ω—Å—ã –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑—ã!
            </div>
          </div>
          <button class="btn primary" onclick="hideModal()">–ü–æ–Ω—è—Ç–Ω–æ!</button>
        </div>
      `;

      showModal(content);
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Ä–æ–≤–Ω–µ
    function showLevelInfo() {
      const content = `
        <div class="level-info">
          <div class="info-header">
            <span class="info-icon">‚óè</span>
            <h3>–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π</h3>
          </div>
          <div class="info-content">
            <div class="level-overview">
              <div class="current-level">
                <span class="level-number">${appState.userData.level}</span>
                <span class="level-label">–¢–≤–æ–π —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å</span>
              </div>
              <div class="level-progress-bar">
                <div class="progress-fill" style="width: ${(appState.userData.exp % 100)}%"></div>
              </div>
              <div class="level-stats">
                <span>–û–ø—ã—Ç: ${appState.userData.exp % 100}/100</span>
                <span>–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è: ${100 - (appState.userData.exp % 100)} XP</span>
              </div>
            </div>
            
            <div class="info-section">
              <h4>–í—Å–µ–≥–æ —É—Ä–æ–≤–Ω–µ–π: 15</h4>
              <div class="levels-grid">
                ${Array.from({length: 15}, (_, i) => `
                  <div class="level-item ${i < appState.userData.level ? 'completed' : i === appState.userData.level ? 'current' : 'locked'}">
                    <span class="level-num">${i + 1}</span>
                    ${i < appState.userData.level ? '‚úÖ' : i === appState.userData.level ? 'üî•' : 'üîí'}
                  </div>
                `).join('')}
              </div>
            </div>
            
            <div class="info-section">
              <h4>–ó–∞—á–µ–º –Ω—É–∂–µ–Ω —É—Ä–æ–≤–µ–Ω—å?</h4>
                              <ul class="benefits-list">
                  <li><span class="benefit-icon">‚óè</span> <strong>–í—ã—à–µ —à–∞–Ω—Å –ø—Ä–∏–∑–æ–≤</strong> –≤ —Ä—É–ª–µ—Ç–∫–µ –∫–µ–π—Å–∞</li>
                  <li><span class="benefit-icon">‚óè</span> <strong>–õ—É—á—à–∏–µ –Ω–∞–≥—Ä–∞–¥—ã</strong> –∑–∞ –∫–≤–µ—Å—Ç—ã</li>
                  <li><span class="benefit-icon">‚óè</span> <strong>–î–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º</strong> –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º</li>
                  <li><span class="benefit-icon">‚óè</span> <strong>–û—Å–æ–±—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</strong> –∏ —Å—Ç–∞—Ç—É—Å—ã</li>
                  <li><span class="benefit-icon">‚óè</span> <strong>–ë–æ–Ω—É—Å—ã –∫ –æ–ø—ã—Ç—É</strong> –∏ MULACOIN</li>
                </ul>
            </div>
            
            <div class="info-section">
              <h4>–ö–∞–∫ –ø–æ–¥–Ω–∏–º–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å?</h4>
                              <ul class="level-up-list">
                  <li><span class="up-icon">‚óè</span> <strong>–í—ã–ø–æ–ª–Ω—è–π –∫–≤–µ—Å—Ç—ã</strong> - –ø–æ–ª—É—á–∞–π –æ–ø—ã—Ç</li>
                  <li><span class="up-icon">‚óè</span> <strong>–ö—Ä—É—Ç–∏ –∫–µ–π—Å</strong> - —Å–ª—É—á–∞–π–Ω—ã–π –æ–ø—ã—Ç</li>
                  <li><span class="up-icon">‚óè</span> <strong>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</strong> - –±–æ–Ω—É—Å–Ω—ã–π –æ–ø—ã—Ç</li>
                  <li><span class="up-icon">‚óè</span> <strong>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</strong> - —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–æ—Å—Ç</li>
                                  <li><span class="up-icon">‚óè</span> <strong>–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è</strong> - —É—Å–∫–æ—Ä–µ–Ω–∏–µ</li>
              </ul>
            </div>
            
            <div class="info-tip">
              <span class="tip-icon">üí°</span>
              <strong>–°–æ–≤–µ—Ç:</strong> –ö–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏! –°—Ç—Ä–µ–º–∏—Å—å –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É —É—Ä–æ–≤–Ω—é –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤!
            </div>
          </div>
          <button class="btn primary" onclick="hideModal()">–ü–æ–Ω—è—Ç–Ω–æ!</button>
        </div>
      `;

      showModal(content);
    }

    // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞
    function openCase() {
      try {
        // –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–µ–π—Å–∞
        window.location.href = 'case.html';
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –∫–≤–µ—Å—Ç:', error);
        showToast('–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞', 'error');
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –∫–≤–µ—Å—Ç–∞
    function startQuest(questId) {
      try {
        const quest = QUEST_DATA[questId];
        if (!quest) {
          showToast('–ö–≤–µ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
          return;
        }

        // –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∫–≤–µ—Å—Ç
        window.location.href = `quests/${questId}.html`;
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∫–≤–µ—Å—Ç–∞:', error);
        showToast('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∫–≤–µ—Å—Ç–∞', 'error');
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –¥–µ—Ç–∞–ª–µ–π –∫–≤–µ—Å—Ç–∞
    function showQuestDetails(questId) {
      const quest = QUEST_DATA[questId];
      if (!quest) return;

      const content = `
        <div class="quest-details">
          <h3>${quest.name}</h3>
          <p>${quest.description}</p>
          <div class="quest-stats">
            <div class="stat">
              <span class="label">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</span>
              <span class="value ${quest.difficulty}">${quest.difficulty === 'hard' ? '–°–ª–æ–∂–Ω—ã–π' : quest.difficulty === 'medium' ? '–°—Ä–µ–¥–Ω–∏–π' : '–õ–µ–≥–∫–∏–π'}</span>
            </div>
            <div class="stat">
              <span class="label">–ù–∞–≥—Ä–∞–¥–∞:</span>
              <span class="value">${quest.rewards.mulacoin} ü•á + ${quest.rewards.exp} XP</span>
            </div>
          </div>
          <div class="quest-actions">
            <button class="btn primary" onclick="startQuest('${questId}')">–ù–∞—á–∞—Ç—å –∫–≤–µ—Å—Ç</button>
            <button class="btn ghost" onclick="hideModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
        </div>
      `;

      showModal(content);
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∏—Å—Ç–æ—Ä–∏–∏
    function showHistory() {
      const content = `
        <div class="history-content">
          <h3>üìä –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</h3>
          <p>–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</p>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-value">${appState.userData.mulacoin}</div>
              <div class="stat-label">MULACOIN</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">${appState.userData.exp}</div>
              <div class="stat-label">–û–ø—ã—Ç</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">${appState.userData.level}</div>
              <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
            </div>
          </div>
          <button class="btn primary" onclick="hideModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
      `;

      showModal(content);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
    function initializeEventHandlers() {
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–≤–µ—Å—Ç–æ–≤
      $$('.card').forEach(card => {
        const questId = card.dataset.quest;
        if (!questId) return;

        const startBtn = card.querySelector('.start');
        const detailsBtn = card.querySelector('.details');

        if (startBtn) {
          startBtn.addEventListener('click', () => startQuest(questId));
        }

        if (detailsBtn) {
          detailsBtn.addEventListener('click', () => showQuestDetails(questId));
        }
      });

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∫–µ–π—Å–∞
      const caseBtn = $('#mysteryCaseBtn');
      if (caseBtn) {
        caseBtn.addEventListener('click', openCase);
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏
      const historyBtn = $('#btnHistory');
      if (historyBtn) {
        historyBtn.addEventListener('click', showHistory);
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–æ–¥–∞–ª–∞
      const modalClose = $('#modalClose');
      if (modalClose) {
        modalClose.addEventListener('click', hideModal);
      }

      const modal = $('#modal');
      if (modal) {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            hideModal();
          }
        });
      }
    }

    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    function forceInitializeApp() {
      if (appState.isInitialized) return;

      try {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        initializeEventHandlers();
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ localStorage
        const savedData = localStorage.getItem('userData');
        if (savedData) {
          try {
            appState.userData = { ...appState.userData, ...JSON.parse(savedData) };
          } catch (e) {
            console.warn('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:', e);
          }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        updateDisplay();
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        document.body.classList.add('loaded');
        
        appState.isInitialized = true;
        showToast('–ö–≤–µ—Å—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!', 'success');
        
        console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
        showToast('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è', 'error');
      }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    function updateDisplay() {
      // –û–±–Ω–æ–≤–ª—è–µ–º mulacoin
      const mulacoinEl = $('#mulacoinAmount');
      if (mulacoinEl) {
        mulacoinEl.textContent = appState.userData.mulacoin;
      }

      // –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
      const levelEl = $('#currentLevel');
      if (levelEl) {
        levelEl.textContent = appState.userData.level;
      }

      // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è
      const progressEl = $('#levelProgress');
      if (progressEl) {
        const expForNext = appState.userData.level * 100;
        const currentExp = appState.userData.exp % 100;
        progressEl.textContent = `${currentExp}/${expForNext}`;
      }
    }

    // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
    function initializeApp() {
      if (appState.isInitialized) return;
      forceInitializeApp();
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
      initializeApp();
    }

    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ 100ms
    setTimeout(forceInitializeApp, 100);
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ 500ms
    setTimeout(forceInitializeApp, 500);
    
    // –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
    setTimeout(forceInitializeApp, 1000);
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    document.addEventListener('click', function() {
      if (!appState.isInitialized) {
        forceInitializeApp();
      }
    }, { once: true });
    
    document.addEventListener('touchstart', function() {
      if (!appState.isInitialized) {
        forceInitializeApp();
      }
    }, { once: true });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('visibilitychange', function() {
      if (!document.hidden && !appState.isInitialized) {
        forceInitializeApp();
      }
    });

    console.log('–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ MiniApp –∑–∞–ø—É—â–µ–Ω–∞');
  </script>
</body>
</html>
