<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>–¶–µ–Ω—Ç—Ä –ö–≤–µ—Å—Ç–æ–≤</title>
  
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="./quests.css" />
  
  <style>
    /* Preload styles to prevent flash of unstyled content */
    .app { opacity: 0; transition: opacity 0.5s ease-in-out; }
    body.loaded .app { opacity: 1; }
  </style>
</head>
<body>

  <div id="app" class="app">
    <header class="header" data-animate>
      <div class="header-content">
        <h1 class="header-title">–¶–µ–Ω—Ç—Ä –ö–≤–µ—Å—Ç–æ–≤</h1>
        <div class="wallet">
          <div class="wallet-item">
            <span>ü™ô</span>
            <span id="mulacoinAmount">0</span>
          </div>
          <div class="wallet-item">
            <span>‚≠ê</span>
            <span id="levelText">–£—Ä. 1</span>
          </div>
        </div>
      </div>
    </header>

    <main>
      <section class="case-section" data-animate>
        <div class="case-card" id="caseCard">
          <div class="case-content">
            <img src="assets/rulette/case_open.png" alt="–ö–µ–π—Å –£—Å–ø–µ—Ö–∞" class="case-image">
            <div class="case-text">
              <h2 class="case-title">–ö–µ–π—Å –£—Å–ø–µ—Ö–∞</h2>
              <p class="case-description">–ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É. –ò–∑–º–µ–Ω–∏ —Å–≤–æ—é —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="featured-quests" data-animate>
        <h2 class="section-title">–ì–ª–∞–≤–Ω—ã–µ –°–∏–º—É–ª—è—Ü–∏–∏</h2>
        <div class="swiper-container">
          <div class="swiper-wrapper">
            <!-- Featured Quest 1: World Government -->
            <div class="swiper-slide" data-quest="world-government" style="--bg: linear-gradient(45deg, #000, #2a0000);">
              <div class="quest-card-overlay"></div>
              <div class="quest-card-content">
                <h3 class="quest-card-title">–¢–∞–π–Ω–æ–µ –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ</h3>
                <p class="quest-card-description">–£–ø—Ä–∞–≤–ª—è–π –º–∏—Ä–æ–º –∏–∑ —Ç–µ–Ω–∏. –ü–ª–µ—Ç–∏ –∏–Ω—Ç—Ä–∏–≥–∏, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π —Ä–µ—Å—É—Ä—Å—ã –∏ —Ä–µ—à–∞–π —Å—É–¥—å–±—ã –Ω–∞—Ü–∏–π. –í–ª–∞—Å—Ç—å –∂–¥–µ—Ç.</p>
                <button class="quest-card-button">–ù–∞—á–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</button>
              </div>
            </div>
            
            <!-- Featured Quest 2: Body Language -->
            <div class="swiper-slide" data-quest="bodylang" style="--bg: linear-gradient(45deg, #000, #001f3f);">
              <div class="quest-card-overlay"></div>
              <div class="quest-card-content">
                <h3 class="quest-card-title">–î–µ—Ç–µ–∫—Ç–æ—Ä –õ–∂–∏</h3>
                <p class="quest-card-description">–ß–∏—Ç–∞–π –ª—é–¥–µ–π –∫–∞–∫ –æ—Ç–∫—Ä—ã—Ç—É—é –∫–Ω–∏–≥—É. –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–π –ª–æ–∂—å –ø–æ –∂–µ—Å—Ç–∞–º –∏ –º–∏–º–∏–∫–µ. –ù–∏–∫—Ç–æ –±–æ–ª—å—à–µ –Ω–µ —Å–º–æ–∂–µ—Ç —Ç–µ–±—è –æ–±–º–∞–Ω—É—Ç—å.</p>
                <button class="quest-card-button">–ù–∞—á–∞—Ç—å –¥–æ–ø—Ä–æ—Å</button>
              </div>
            </div>

            <!-- Featured Quest 3: Influence -->
            <div class="swiper-slide" data-quest="funnel" style="--bg: linear-gradient(45deg, #000, #2e003e);">
              <div class="quest-card-overlay"></div>
              <div class="quest-card-content">
                <h3 class="quest-card-title">–ò–º–ø–µ—Ä–∏—è –í–ª–∏—è–Ω–∏—è</h3>
                <p class="quest-card-description">–ü–æ—Å—Ç—Ä–æ–π –º–µ–¥–∏–∞-–∏–º–ø–µ—Ä–∏—é —Å –Ω—É–ª—è. –°–æ–∑–¥–∞–≤–∞–π –≤–∏—Ä—É—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç, –º–∞–Ω–∏–ø—É–ª–∏—Ä—É–π –º–Ω–µ–Ω–∏–µ–º –º–∞—Å—Å –∏ —Å—Ç–∞–Ω—å –∫–æ—Ä–æ–ª–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p>
                <button class="quest-card-button">–ù–∞—á–∞—Ç—å –≤–µ—â–∞–Ω–∏–µ</button>
              </div>
            </div>
          </div>
          <div class="swiper-pagination"></div>
        </div>
      </section>

      <section class="other-quests">
        <h2 class="section-title" data-animate>–î—Ä—É–≥–∏–µ —Å–∏–º—É–ª—è—Ü–∏–∏</h2>
        <div class="quests-grid">
          <!-- Quest: First Business -->
          <div class="quest-item" data-quest="copy" data-animate>
            <div class="quest-header">
              <span class="quest-category">–ë–∏–∑–Ω–µ—Å</span>
              <h3 class="quest-title">–ü–µ—Ä–≤—ã–π –ú–∏–ª–ª–∏–æ–Ω</h3>
            </div>
            <p class="quest-description">–û—Ç –≥–∞—Ä–∞–∂–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞–ø–∞ –¥–æ IPO. –ü—Ä–∏–Ω–∏–º–∞–π —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–µ–¥—É—Ç —Ç–≤–æ–π –±–∏–∑–Ω–µ—Å –∫ —É—Å–ø–µ—Ö—É –∏–ª–∏ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤—É.</p>
            <div class="quest-footer">
              <div class="quest-tags">
                <span class="quest-tag">–°—Ä–µ–¥–Ω–∏–π</span>
              </div>
              <button class="quest-button">–ù–∞—á–∞—Ç—å</button>
            </div>
          </div>

          <!-- Quest: Psychology -->
          <div class="quest-item" data-quest="psychology" data-animate>
            <div class="quest-header">
              <span class="quest-category">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</span>
              <h3 class="quest-title">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è –î–µ–Ω–µ–≥</h3>
            </div>
            <p class="quest-description">–í—Å–∫—Ä–æ–π –∫–æ–¥ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤. –ó–∞—Å—Ç–∞–≤—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–ª–∞—Ç–∏—Ç—å –±–æ–ª—å—à–µ –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è —Å–≤–æ–µ–π –≤–ª–∞—Å—Ç—å—é.</p>
            <div class="quest-footer">
              <div class="quest-tags">
                <span class="quest-tag">–°—Ä–µ–¥–Ω–∏–π</span>
              </div>
              <button class="quest-button">–ù–∞—á–∞—Ç—å</button>
            </div>
          </div>
          
          <!-- Quest: Competitors -->
          <div class="quest-item" data-quest="competitors" data-animate>
            <div class="quest-header">
              <span class="quest-category">–°—Ç—Ä–∞—Ç–µ–≥–∏—è</span>
              <h3 class="quest-title">–ê–Ω–∞–ª–∏–∑ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤</h3>
            </div>
            <p class="quest-description">–í—ã–π–¥–∏ –Ω–∞ —Ç—Ä–æ–ø—É –≤–æ–π–Ω—ã. –ò–∑—É—á–∏ —Å–ª–∞–±–æ—Å—Ç–∏ –≤—Ä–∞–≥–∞, –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö –∏ —Å—Ç–∞–Ω—å –º–æ–Ω–æ–ø–æ–ª–∏—Å—Ç–æ–º –Ω–∞ —Ä—ã–Ω–∫–µ.</p>
            <div class="quest-footer">
              <div class="quest-tags">
                <span class="quest-tag">–°–ª–æ–∂–Ω—ã–π</span>
              </div>
              <button class="quest-button">–ù–∞—á–∞—Ç—å</button>
            </div>
          </div>

          <!-- Quest: Trends -->
          <div class="quest-item" data-quest="trends" data-animate>
            <div class="quest-header">
              <span class="quest-category">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
              <h3 class="quest-title">–ê–Ω–∞–ª–∏–∑ –¢—Ä–µ–Ω–¥–æ–≤</h3>
            </div>
            <p class="quest-description">–ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–π –±—É–¥—É—â–µ–µ. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ, –Ω–∞—Ö–æ–¥–∏ —Ç—Ä–µ–Ω–¥—ã –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∏ —Å—Ç–∞–Ω—É—Ç –º–µ–π–Ω—Å—Ç—Ä–∏–º–æ–º, –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π.</p>
            <div class="quest-footer">
              <div class="quest-tags">
                <span class="quest-tag">–°–ª–æ–∂–Ω—ã–π</span>
              </div>
              <button class="quest-button">–ù–∞—á–∞—Ç—å</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>
  
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script>
    // --- App Initialization ---
    (function() {
      // Telegram WebApp Init
      try {
        if (window.Telegram && window.Telegram.WebApp) {
          window.Telegram.WebApp.ready();
          window.Telegram.WebApp.expand();
          window.Telegram.WebApp.enableClosingConfirmation();
        }
      } catch (e) {
        console.error('Telegram WebApp initialization failed', e);
      }

      // --- Swiper Slider for Featured Quests ---
      new Swiper('.swiper-container', {
        loop: true,
        effect: 'coverflow',
        grabCursor: true,
        centeredSlides: true,
        slidesPerView: 'auto',
        coverflowEffect: {
          rotate: 0,
          stretch: 80,
          depth: 200,
          modifier: 1,
          slideShadows: false,
        },
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        autoplay: {
          delay: 5000,
          disableOnInteraction: false,
        },
      });

      // --- Animation on Scroll ---
      const animatedElements = document.querySelectorAll('[data-animate]');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('in-view');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      animatedElements.forEach(el => observer.observe(el));

      // --- Navigation ---
      function navigateTo(url) {
        document.body.style.opacity = '0';
        setTimeout(() => {
          window.location.href = url;
        }, 300);
      }

      document.getElementById('caseCard').addEventListener('click', () => {
        navigateTo('case.html');
      });

      document.querySelectorAll('[data-quest]').forEach(card => {
        card.addEventListener('click', (e) => {
          // Ensure click is on the button or card itself, not other elements
          if (e.target.closest('.quest-card-button') || e.target.closest('.quest-button') || e.target.closest('.quest-item')) {
            const questId = card.dataset.quest;
            if (questId) {
              navigateTo(`quests/${questId}.html`);
            }
          }
        });
      });

      // --- Dummy User Data (replace with actual data) ---
      document.getElementById('mulacoinAmount').textContent = '1,250';
      document.getElementById('levelText').textContent = '–£—Ä. 7';

      // --- Finalize Page Load ---
      window.addEventListener('load', () => {
        document.body.classList.add('loaded');
        document.body.style.transition = 'opacity 0.3s ease'; // for navigation
      });
    })();
  </script>
</body>
</html>
